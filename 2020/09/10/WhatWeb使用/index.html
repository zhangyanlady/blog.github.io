<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="future.zhangyan">



    <meta name="description" content="未来可期">



<title>WhatWeb使用 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    




	<!--动态线条背景-->

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
    <div class="wrapper">
        <header>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
	  <script type="text/javascript" src="C:/Users/zhangyan/Desktop/blog/themes/next/source/js"></script>

    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">张艳&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/book">Book</a>
                
                    <a class="menu-item" href="/bangumis">Bangumis</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
				<label for="switch_default" class="toggleBtn"></label>
         
				<div class="search bar7">
					<form id="search-form"> <!-- 搜索框相关 -->
						<input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off"/>
						<button type="submit" class="search-form-submit"></button>
						<i class="fa fa-times" onclick="resetSearch()"></i> <!-- 清空/重置搜索框 -->
					</form>
					<div class="ins-section-wrapper">
						<div class="ins-section-container"></div>
					</div>
					<div id="local-search-result"></div> <!-- 搜索结果区 -->
						<p class='no-result'>No results found </p> <!-- 无匹配时显示，注意请在 CSS 中设置默认隐藏 -->
					</div>


        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">张艳&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/book">Book</a>
                
                    <a class="menu-item" href="/bangumis">Bangumis</a>
                
            </div>


        </div>
    </nav>

</header>
<style type="text/css">
	* {
		box-sizing:border-box;
	}
	body {
		margin:0;
		padding:0;
		background-image:url(ydrzimages/p3.jpg);
		font-weight:500;
		font-family:"Microsoft YaHei","宋体","Segoe UI","Lucida Grande",Helvetica,Arial,sans-serif,FreeSans,Arimo;
	}
	#container {
		width:500px;
		height:820px;
		margin:0 auto;
	}
	div.search {
		padding:10px 0;
		margin-left:200px
	}
	form {
		position:relative;
		width:300px;
		margin:0 auto;
	}
	input,button {
		border:none;
		outline:none;
	}
	input {
		width:100%;
		height:42px;
		padding-left:13px;
	}
	button {
		height:42px;
		width:42px;
		cursor:pointer;
		position:absolute;
	}
	/*搜索框7*/
		  
	.bar7 form {
		height:42px;
	}
	.bar7 input {
		width:200px;
		border-radius:42px;
		border:2px solid #324B4E;
		transition:.3s linear;
		float:right;
	}
	.bar7 input:focus {
		width:300px;
	}
	.bar7 button {
		background:none;
		top:-2px;
		right:20px;
	}
	.bar7 button:before {
		content:"点..";
		font-family:FontAwesome;
		color:#324b4e;
	}
	.no-result{
		display:none
	}
</style>

<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">WhatWeb使用</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">future.zhangyan</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">September 10, 2020&nbsp;&nbsp;21:00:35</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a>
                            
                        </span>
						<span id="/2020/09/10/WhatWeb%E4%BD%BF%E7%94%A8/" class="leancloud-visitors view" data-flag-title="WhatWeb使用">
						  <em class="post-meta-item-text">Pageviews:</em>
						  <i class="leancloud-visitors-count"></i>
						</span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>WhatWeb是一个开源的网站指纹识别软件。</p>
<p>WhatWeb可识别Web技术，包括内容管理系统（CMS），博客平台，统计/分析包，Javascript库，服务器和嵌入式设备。</p>
<p>WhatWeb有超过1000个插件，每个插件都能识别不同的东西。WhatWeb还标识版本号，电子邮件地址，账户ID，Web框架模块，SQL错误等。</p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><p>拥有超过1700+个插件</p>
<p>​    若网站返回302，会跳转到重定向的网站</p>
<p>​    可以根据服务器返回的响应头确定网站使用的服务器类型，web中间件类型，cookie信息</p>
<p>​    可以从网站的源代码中确定网站使用了哪些JavaScript库</p>
<p>​    可以通过页面hash，path等确定网站使用的cms版本</p>
<p>​    查询网站ip及所属国家</p>
<p>​    多种日志格式：XML，JSON，MagicTree，RubyObject，MongoDB</p>
<p>​    可定制化HTTP头</p>
<p>​    可进行基础的认证设置</p>
<p>​    支持批量扫描网站</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Whatweb是基于ruby语言开发，因此可以安装在具备ruby环境的系统中，目前支持Windows/Max OSX/Linux。</p>
<p>注：kali linux下已经集成了此工具</p>
<p>debian/ubtuntu系统下</p>
<p>apt-get install whatweb  //可自动解决以来问题</p>
<p>redhat/centos系统下</p>
<p>yum updateyum install ruby ruby-devel rubygemswget <a target="_blank" rel="noopener" href="http://www.morningstarsecurity.com/downloads/whatweb-0.4.7.tar.gztar">http://www.morningstarsecurity.com/downloads/whatweb-0.4.7.tar.gztar</a> xzvf whatweb-0.4.7.tar.gzcd whatweb-0.4.7./whatweb url</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>用法：whatweb 域名</p>
<p>-i 指定要扫描的文件</p>
<p>-v 详细显示扫描的结果</p>
<p>-a 指定运行级别</p>
<p><strong>常规扫描</strong></p>
<p>whatweb 域名</p>
<p><strong>批量扫描</strong></p>
<p>我们可以通过将很多要扫描的域名放在文件内，然后扫描时指定该文件即可。</p>
<p>使用命令：whatweb -i /root/target.txt</p>
<p><strong>详细回显扫描</strong></p>
<p>whatweb -v 域名</p>
<p><strong>强度扫描等级控制</strong></p>
<p>whatweb有一个-aggression（简写为-a）参数，此参数后边可以跟数字1-4，分别对应4个不同的等级。</p>
<p>stealthy 每个目标发送一次http请求，并且会跟随重定向</p>
<p>​    unused 不可用（从2011年开始，此参数就是在开发状态</p>
<p>​    aggressive 每个目标发送少量的http请求，这些请求时根据参数为1时结果确定的</p>
<p>​    heavy 每个目标会发送大量的http请求，会去尝试每一个插件</p>
<p>whatweb -a 等级 域名 （可以和-v参数结合使用</p>
<p>注：默认参数为1</p>
<p><strong>快速本地扫描（扫描内网主机）</strong></p>
<p>whatweb –no-errors -t 255 内网网段 （可以和-a和-v参数结合使用</p>
<p><strong>将扫描结果导出至文件内</strong></p>
<p>whatweb <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> –log-xml=baidu.xml</p>
<p><strong>其他格式导出文件同理：</strong></p>
<p>–log-brief=FILE            简单的记录，每个网站只记录一条返回信息–log-verbose=FILE            详细输出–log-xml=FILE            返回xml格式的日志–log-json=FILE            以json格式记录日志–log-json-verbose=FILE            记录详细的json日志–log-magictree=FILE            xml的树形结构–log-object=FILE            ruby对象格式–log-mongo-database            mongo数据库格式</p>
<p>注：json格式需要安装json依赖sudo gem install json</p>
<p>Mongo格式需要安装mongo依赖sudo gem install json</p>
<p><strong>列出所有插件</strong></p>
<p>whatweb -l</p>
<p><strong>查看插件的具体信息</strong></p>
<p>whatweb –info-plugins=”插件名”</p>
<p>插件的开发语言为ruby，所以插件为.rb格式，插件的保存目录为/usr/share/whatweb/plugins，可以查看别人是怎么写插件的。</p>
<p><strong>编写whatweb插件</strong></p>
<p>whatweb对国内的网站识别不是很友好，我们可以自己写插件，兼容更多国内的网站。</p>
<p>whatweb的官方模板：</p>
<p>Plugin.define “Plugin-Template” do    author “Enter Your Name”    version “0.1”    description “Describe what the plugin identifies. Include the homepage of the software package”    examples %w| include-some.net example-websites.com here.com |     # a comment block here is a good place to make notes for yourself and others      # There are four types of matches: regexp, text, ghdb     # Matches are enclosed in {} brackets and separated by commas     matches [    {:name=&gt;”a brief description of the match, eg. powered by in footer”,    :certainty=&gt;100, # 100 is certain, 75 is probably and 25 is maybe. if omitted, it defaults to 100.     :regexp=&gt;/This page was generated by <a target="_blank" rel="noopener" href="http://www.genericcms.com//en//products//generic-cms//&quot;&gt;Generic">http://www.genericcms.com\/en\/products\/generic-cms\/&quot;&gt;Generic</a> CMS&lt;/a&gt;/ },    {:name=&gt;”title”,    :certainty=&gt;75,    :text=&gt;”<title>Generic Homepage</title>“ }    ]    end</p>
<p>语法解释：</p>
<p>第一行定义的为插件的名字，可以直接在命令行中使用。</p>
<p>命令行测试：</p>
<p>./whatweb -p drupal <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a></p>
<p>第二行作者，第三行版本，第四行插件描述，第五行，插件所使用网站的例子</p>
<p>第五行是一个matchs列表，也是whatweb的关键，里边定义了一些匹配规则</p>
<p>{:name=&gt;”meta generator tag”, : 包含匹配的文件名称，这个文件必须是网站中唯一存在的文件。</p>
<p>:regexp=&gt; 是包含的要匹配的模式，它是一个正则表达式，可以有以下选项：</p>
<p>:regexp标准的 ruby 正则表达式:text 字符:ghdb google hack 数据库，包含以下几个模式inurl:包含的字符串在 urlintitle:包含的字符串在 titlefiletype:包含的文件名，如 PDF, JPG, RB 等:md5 请求页面的 md5 hash 值:tagpattern html 标签:version 可以设置正则表达式或直接字符串匹配:string 可以设置正则表达式或直接字符串匹配:filepath 可以设置正则表达式或直接字符串匹配，通常显示系统错误或配置文件等:account 经常用在登陆页面或用户列表等:module 可以设置正则表达式或直接字符串匹配，如网络设备可能使用了一个ruby 模块等:model 可以设置正则表达式或直接字符串匹配:firmware 可以设置正则表达式或直接字符串匹配，设备的固件版本</p>
<p>了解以上选项我们可以写出一个简单的识别dedecms的插件，如下</p>
<p>Plugin.define “DedeCMS” doauthor “xxxxx”version “0.1”description “dedecms - homepage:<a target="_blank" rel="noopener" href="http://www.dedecms.com/&quot;">http://www.dedecms.com/&quot;</a> # Examples # examples %w|<a target="_blank" rel="noopener" href="http://www.dedecms.com|/">www.dedecms.com|</a> matches [ # Version detection # Powered by text {:name=&gt;”Powered by DedeCms”,:regexp=&gt;/Powered by .<em>DedeCMS.</em>/}]end</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>future.zhangyan</span>
                    </p>
                
				
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://zhangyanlady.github.io/2020/09/10/WhatWeb%E4%BD%BF%E7%94%A8/">https://zhangyanlady.github.io/2020/09/10/WhatWeb%E4%BD%BF%E7%94%A8/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>The future can be expected, the world is worth it.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"># 网络安全</a>
                    
                        <a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"># 渗透测试</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/09/12/%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3/">暴力破解</a>
            
            
            <a class="next" rel="next" href="/2020/08/16/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">内网渗透</a>
            
        </section>
			</br>
			

</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© future.zhangyan | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
	<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>


	
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
